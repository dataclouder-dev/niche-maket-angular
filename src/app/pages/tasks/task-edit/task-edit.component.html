<div class="task-form-card">
  <p-card [header]="id ? 'Edit Task' : 'New Task'">
    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="flex flex-column gap-4">
      <div class="form-field">
        <label for="name" class="block">Title</label>
        <br />
        <input style="width: 100%" id="name" type="text" pInputText formControlName="name" placeholder="Enter task title" />
      </div>

      <div class="form-field">
        <label for="idAgentCard" class="block">Agent Card</label>
        <br />
        <p-dropdown
          styleClass="w-full"
          id="idAgentCard"
          [options]="agentOptions"
          formControlName="idAgentCard"
          placeholder="Select Agent Card"
          class="w-full">
        </p-dropdown>
      </div>

      <div class="form-field">
        <label for="idNotionDB" class="block">Notion DB Id</label>
        <br />
        <p-dropdown
          styleClass="w-full"
          id="idNotionDB"
          [options]="dbOptions"
          formControlName="idNotionDB"
          placeholder="Select Notion DB"
          class="w-full">
        </p-dropdown>
      </div>

      <div class="form-field">
        <label for="taskType" class="block">Task Type</label>
        <br />
        <p-dropdown id="taskType" [options]="taskTypes" formControlName="taskType" placeholder="Select Task Type" class="w-full"> </p-dropdown>
      </div>

      <div class="form-field">
        <label for="description" class="block">Description</label>
        <textarea
          class="textmin"
          rows="3"
          pInputTextarea
          id="description"
          formControlName="description"
          placeholder="Enter task description"></textarea>
      </div>

      <div class="form-field">
        <label for="sources" class="block">Sources</label>
        <br />
        <p-autoComplete
          id="sources"
          [suggestions]="sourceSuggestions"
          optionLabel="label"
          optionValue="value"
          formControlName="sources"
          placeholder="Select Sources"
          class="w-full"
          [dropdown]="true"
          (completeMethod)="search($event)"></p-autoComplete>
      </div>

      <div class="form-field">
        <label for="status" class="block">Status</label>
        <br />
        <p-dropdown id="status" [options]="statuses" formControlName="status" placeholder="Select Status" class="w-full"> </p-dropdown>
      </div>

      <div class="flex justify-content-end mt-4">
        <p-button type="submit" label="Save Task" [disabled]="!taskForm.valid" icon="pi pi-check" iconPos="right"> </p-button>
      </div>
    </form>
  </p-card>
</div>
